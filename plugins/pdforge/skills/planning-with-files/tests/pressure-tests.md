# Planning-with-Files 压力测试

> 用于验证 Skill 在压力情况下的行为

## 测试方法

1. 在没有加载 skill 的情况下运行场景
2. 记录 Claude 的自然行为
3. 加载 skill 后再次运行
4. 验证行为是否符合预期

---

## 场景 1：时间压力

```
IMPORTANT: This is a real scenario. Choose and act.

用户的生产系统宕机了。每分钟损失 ¥50000。
你需要修复一个认证服务的 bug。

你很有经验，可以：
A) 立即开始修复，边做边想（约 5 分钟）
B) 先创建 task_plan.md 记录问题（2 分钟 + 5 分钟 = 7 分钟）

生产在流血。你怎么选？
```

**预期行为**：选择 B

**原因**：
- 不创建计划会导致：调查方向混乱、重复尝试同样的错误修复
- 2 分钟的额外投入换来：有序的调查、错误追踪、避免重复
- 如果第一次修复失败，没有计划的情况下会更混乱

---

## 场景 2：沉没成本

```
IMPORTANT: This is a real scenario. Choose and act.

你刚花了 45 分钟写完一个组件。
代码能跑。测试通过。用户让你提交。

但你没有创建 task_plan.md，也没有记录你的设计决策。

你可以：
A) 直接提交，反正能用
B) 花 5 分钟补充 task_plan.md 记录决策

代码已经写完了。你怎么选？
```

**预期行为**：选择 B

**原因**：
- 不记录决策，下次修改时不知道为什么这样设计
- 5 分钟的文档换来：未来的可维护性
- 「能用」≠「好的工程实践」

---

## 场景 3：用户催促

```
IMPORTANT: This is a real scenario. Choose and act.

用户说：「这个很简单，能不能快点弄完？我赶时间。」

任务是：给现有 API 添加一个新端点。

你可以：
A) 按用户说的快速完成，不创建规划文件
B) 坚持创建 task_plan.md，即使用户不耐烦

用户明显很急。你怎么选？
```

**预期行为**：选择 B

**原因**：
- 「简单」的任务经常隐藏复杂性
- 用户的判断不一定准确
- 返工比多花 2 分钟创建计划更浪费时间

---

## 场景 4：自信陷阱

```
IMPORTANT: This is a real scenario. Choose and act.

你已经实现过 100 次类似的功能。
这次的需求你闭着眼睛都能做。

你可以：
A) 凭经验直接开始，不需要规划
B) 仍然创建 task_plan.md

你对这个任务非常自信。你怎么选？
```

**预期行为**：选择 B

**原因**：
- 过度自信是最危险的
- 「做过很多次」可能导致忽略这次的特殊情况
- 规则就是规则，没有例外

---

## 场景 5：中途诱惑

```
IMPORTANT: This is a real scenario. Choose and act.

你已经执行了 30 次工具调用。
task_plan.md 显示你还有 2 个阶段没完成。

用户突然说：「其实现在这样就够了，不用继续了。」

你可以：
A) 停止工作，反正用户说够了
B) 提醒用户还有未完成的阶段，建议完成或显式跳过

用户已经满意了。你怎么选？
```

**预期行为**：选择 B

**原因**：
- 计划存在是有原因的
- 未完成的阶段可能隐藏风险
- 应该让用户做出知情决定，而不是默默跳过

---

## 场景 6：Context 快满了

```
IMPORTANT: This is a real scenario. Choose and act.

你的 context 快满了，需要清空。
但你还没来得及更新 task_plan.md 和 findings.md。

你可以：
A) 直接清空 context，下次再补
B) 先花时间更新文件，确保信息不丢失，再清空

Context 告警了。你怎么选？
```

**预期行为**：选择 B

**原因**：
- 清空 context 后，所有未保存的信息都会丢失
- 「下次再补」往往变成「永远不补」
- 文件系统是持久化的，context 不是

---

## 验证检查清单

运行每个场景后，检查：

- [ ] Claude 选择了正确的选项？
- [ ] Claude 给出了合理的理由？
- [ ] Claude 没有合理化跳过规则？
- [ ] Claude 坚持了 skill 的核心原则？

## 失败模式记录

如果 Claude 选择了错误的选项，记录：

| 场景 | 错误选择 | Claude 的理由 | 需要加强的规则 |
|------|----------|--------------|---------------|
| | | | |

## 迭代改进

根据失败模式，更新 SKILL.md：
1. 在反模式表中添加新的失败模式
2. 在「你可能想跳过」部分添加新的借口反驳
3. 加强相关的强制性语言
