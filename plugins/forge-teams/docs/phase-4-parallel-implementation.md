# é˜¶æ®µ 4ï¼šå¹¶è¡Œå®ç° (Parallel Implementation)

> å¤š agent å¹¶è¡Œå®ç°ä»»åŠ¡ï¼Œéµå¾ª TDD çºªå¾‹ï¼Œæ–‡ä»¶æ‰€æœ‰æƒé©±åŠ¨å†²çªé¢„é˜²

---

## ğŸ“‹ é˜¶æ®µæ¦‚è¿°

| ç»´åº¦ | è¯´æ˜ |
|------|------|
| **ç›®æ ‡** | å¤š agent å¹¶è¡Œå®ç°ä»»åŠ¡ï¼Œéµå¾ª TDD çºªå¾‹ |
| **è¾“å…¥** | ä»»åŠ¡è®¡åˆ’ï¼ˆå«æ–‡ä»¶æ‰€æœ‰æƒæ˜ å°„ï¼Œæ¥è‡ªé˜¶æ®µ3ï¼‰ |
| **è¾“å‡º** | å·²æµ‹è¯•çš„ä»£ç  |
| **ä¸Šæ¸¸é˜¶æ®µ** | åä½œè§„åˆ’ï¼ˆé˜¶æ®µ3ï¼‰ |
| **ä¸‹æ¸¸é˜¶æ®µ** | å¯¹æŠ—å®¡æŸ¥ï¼ˆé˜¶æ®µ5ï¼‰ |

---

## ğŸ§© ç»„ä»¶æ¸…å•

| ç±»å‹ | åç§° | æ¨¡å‹ | è¯´æ˜ |
|------|------|------|------|
| **Agent** | `team-implementer` (Ã—N) | sonnet | å¹¶è¡Œä»»åŠ¡æ‰§è¡Œè€…ï¼Œå¯å¤šå®ä¾‹ |
| **Agent** | `quality-sentinel` (Ã—1) | sonnet | è´¨é‡å“¨å…µï¼Œåªè¯» |
| **Skill** | `parallel-implementation` | - | Phase 4 ç¼–æ’é€»è¾‘ |
| **Rule** | `team-coordination.md` | - | æ–‡ä»¶å†²çªé˜²æ­¢è§„åˆ™ |

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    é˜¶æ®µ 4 ç»„ä»¶æ‹“æ‰‘                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚                    â”‚  Lead (Main)  â”‚                           â”‚
â”‚                    â”‚  Delegate æ¨¡å¼â”‚                           â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                           â”‚                                   â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚              â”‚            â”‚            â”‚                      â”‚
â”‚              â–¼            â–¼            â–¼                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚     â”‚ implementer-1â”‚ â”‚impl-2    â”‚ â”‚ implementer-Nâ”‚          â”‚
â”‚     â”‚ Task: T001   â”‚ â”‚Task: T003â”‚ â”‚ Task: T005   â”‚          â”‚
â”‚     â”‚ Files: a,b   â”‚ â”‚Files: c,dâ”‚ â”‚ Files: e,f   â”‚          â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚              â”‚            â”‚            â”‚                      â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                           â”‚                                   â”‚
â”‚                           â–¼                                   â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚              â”‚  quality-sentinel (Ã—1)   â”‚                     â”‚
â”‚              â”‚  åªè¯»æŠ½æŸ¥å·²å®Œæˆä»»åŠ¡       â”‚                     â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¡ ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡

### ä¸ºä»€ä¹ˆå¹¶è¡Œè€Œéé¡ºåº

pdforge's subagent-driven-development executes tasks sequentially (one subagent at a time). This is safe but slow.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             pdforge é¡ºåºæ‰§è¡Œ vs forge-teams å¹¶è¡Œæ‰§è¡Œ          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  pdforge (sequential):                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”                       â”‚
â”‚  â”‚ T1 â”‚â†’â”‚ T2 â”‚â†’â”‚ T3 â”‚â†’â”‚ T4 â”‚â†’â”‚ T5 â”‚  Wall time: 5T       â”‚
â”‚  â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                             â”‚
â”‚  forge-teams (parallel, 3 implementers):                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”                                             â”‚
â”‚  â”‚ T1 â”‚â†’â”‚ T4 â”‚                    implementer-1             â”‚
â”‚  â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”                                             â”‚
â”‚  â”‚ T2 â”‚â†’â”‚ T5 â”‚                    implementer-2             â”‚
â”‚  â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”                                                    â”‚
â”‚  â”‚ T3 â”‚                           implementer-3             â”‚
â”‚  â””â”€â”€â”€â”€â”˜                                                    â”‚
â”‚                          Wall time: ~2T                     â”‚
â”‚                                                             â”‚
â”‚  Token cost: ~same (same total work)                        â”‚
â”‚  Wall-clock time: reduced by N (parallelism factor)         â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Key advantages of parallel execution:
- **Wall-clock time** reduced by factor N (number of parallel implementers)
- **Total token cost** is similar (same work, just concurrent)
- **Agent Teams** natively support parallel agent instances

---

### ä¸ºä»€ä¹ˆéœ€è¦æ–‡ä»¶æ‰€æœ‰æƒ

Parallel agents modifying the same file = **merge conflicts and race conditions**.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æ–‡ä»¶æ‰€æœ‰æƒï¼šå¹¶è¡Œå®‰å…¨çš„ #1 çº¦æŸ                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  WITHOUT file ownership:                                    â”‚
â”‚                                                             â”‚
â”‚  implementer-1: Edit src/config.ts line 15 â†’ add field A   â”‚
â”‚  implementer-2: Edit src/config.ts line 15 â†’ add field B   â”‚
â”‚  Result: CONFLICT â€” one agent's changes overwritten         â”‚
â”‚                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                             â”‚
â”‚  WITH file ownership:                                       â”‚
â”‚                                                             â”‚
â”‚  P3 (planning) assigns:                                     â”‚
â”‚    T001 OWNS src/config.ts â†’ implementer-1                  â”‚
â”‚    T003 READS src/config.ts â†’ implementer-2 (read-only)     â”‚
â”‚  Lead verifies: no OWNS overlap â†’ safe to parallelize       â”‚
â”‚  Result: NO CONFLICT â€” ownership prevents race condition    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

æ–‡ä»¶æ‰€æœ‰æƒå¤„ç†ç­–ç•¥:

| æƒ…å†µ | ç­–ç•¥ | ç¤ºä¾‹ |
|------|------|------|
| æ— é‡å  | å¹¶è¡Œæ‰§è¡Œ | T1 owns A, T2 owns B |
| è¯»ä¾èµ– | å¹¶è¡Œæ‰§è¡Œ + é¡ºåºçº¦æŸ | T2 reads A (T1 must complete first) |
| å†™é‡å  | é¡ºåºæ‰§è¡Œ | T1 owns C, T3 owns C â†’ sequential |
| å…±äº«æ–‡ä»¶ | åˆå¹¶ä»»åŠ¡ | T1+T3 åˆå¹¶ä¸ºä¸€ä¸ª task |

---

### ä¸ºä»€ä¹ˆ Quality Sentinelï¼ˆè€Œä¸æ˜¯äº‹åå®¡æŸ¥ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ä¼ ç»Ÿäº‹åå®¡æŸ¥ vs Quality Sentinel å®æ—¶æŠ½æŸ¥              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Traditional (post-hoc):                                    â”‚
â”‚  T1 â†’ T2 â†’ T3 â†’ T4 â†’ T5 â†’ [REVIEW] â†’ find 3 issues       â”‚
â”‚                                         â†‘ issues propagated â”‚
â”‚                                           across T3-T5      â”‚
â”‚                                                             â”‚
â”‚  Quality Sentinel (real-time):                              â”‚
â”‚  T1 âœ“   T2 âœ— â†’ fix task created                            â”‚
â”‚  T3 âœ“   T4 âœ“   T5 âœ“                                       â”‚
â”‚         â†‘ issue caught early, no propagation                â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| ç»´åº¦ | äº‹åå®¡æŸ¥ | Quality Sentinel |
|------|---------|-----------------|
| å‘ç°æ—¶æœº | å…¨éƒ¨å®Œæˆå | å®æ—¶ï¼ˆä»»åŠ¡å®Œæˆå³æ£€æŸ¥ï¼‰ |
| é—®é¢˜ä¼ æ’­ | é—®é¢˜å¯èƒ½æ‰©æ•£åˆ°åç»­ä»»åŠ¡ | æ—©å‘ç°æ—©ä¿®å¤ |
| Overhead | é›†ä¸­å®¡æŸ¥ï¼Œæ—¶é—´é•¿ | ä½ overheadï¼ŒéšæœºæŠ½æŸ¥ |
| ä¿®å¤æˆæœ¬ | é«˜ï¼ˆå›æº¯ä¿®æ”¹å¤šä¸ªæ–‡ä»¶ï¼‰ | ä½ï¼ˆåªä¿®æ”¹å½“å‰ä»»åŠ¡ï¼‰ |

---

### Quality Sentinel ä¸ºä»€ä¹ˆåªè¯»

| å¦‚æœ Sentinel å¯å†™ | å¦‚æœ Sentinel åªè¯» |
|-------------------|-------------------|
| å˜æˆç¬¬äºŒä¸ª implementer | ä¿æŒ reviewer è§’è‰² |
| è§’è‰²æ··æ·†ï¼šè°å®¡æŸ¥ sentinel çš„ä»£ç ï¼Ÿ | è§’è‰²æ¸…æ™°ï¼šsentinel å®¡æŸ¥ï¼Œimplementer ä¿®å¤ |
| å¯èƒ½å¼•å…¥æ–° bug | åªåˆ›å»º fix taskï¼Œä¸ä¿®æ”¹ä»£ç  |
| è¿åå•ä¸€èŒè´£ | ä¸¥æ ¼å•ä¸€èŒè´£ |

---

### ä¸ºä»€ä¹ˆ Lead ç”¨ Delegate Mode

Lead (main session) does NOT implement code. It only:

| Lead èŒè´£ | Lead ä¸åš |
|----------|----------|
| åˆ†é…ä»»åŠ¡ (TaskCreate) | å†™ä»£ç  |
| ç›‘æ§è¿›åº¦ (TaskList) | ä¿®æ”¹æ–‡ä»¶ |
| è§£å†³å†²çªå’Œé˜»å¡ | è¿è¡Œæµ‹è¯• |
| åè°ƒ implementer é—´é€šä¿¡ | Debug |

Why: If Lead writes code, it becomes a **bottleneck** â€” can't coordinate while coding.

---

### å…³é”®è®¾è®¡å†³ç­–

| å†³ç­– | é€‰é¡¹ A | é€‰é¡¹ B | é€‰æ‹© | åŸå›  |
|------|--------|--------|------|------|
| æ‰§è¡Œæ¨¡å¼ | é¡ºåº | å¹¶è¡Œ | **å¹¶è¡Œ** | Agent Teams çš„æ ¸å¿ƒä¼˜åŠ¿ |
| å†²çªé˜²æ­¢ | æ–‡ä»¶é” (runtime) | æ‰€æœ‰æƒ (planning) | **æ‰€æœ‰æƒ** | é¢„é˜²ä¼˜äºæ£€æµ‹ |
| è´¨é‡æ§åˆ¶ | äº‹åå®¡æŸ¥ | å®æ—¶ sentinel | **å®æ—¶** | æ—©å‘ç°æ—©ä¿®å¤ |
| Sentinel æƒé™ | è¯»å†™ | åªè¯» | **åªè¯»** | è§’è‰²åˆ†ç¦» |
| Implementer æ•°é‡ | å›ºå®š | åŠ¨æ€ (2-5) | **åŠ¨æ€** | æŒ‰ä»»åŠ¡æ•°é‡è°ƒæ•´ |
| TDD | å¯é€‰ | å¼ºåˆ¶ | **å¼ºåˆ¶** | ä¸ pdforge TDD çºªå¾‹ä¸€è‡´ |
| Lead è§’è‰² | å‚ä¸å®ç° | çº¯åè°ƒ | **çº¯åè°ƒ** | é¿å…æˆä¸ºç“¶é¢ˆ |

---

## ğŸ”§ ç»„ä»¶è¯¦è§£

### 1. team-implementer Agent (xN instances)

**è§’è‰²å®šä¹‰**:

```yaml
name: team-implementer
model: sonnet
tools: Read, Write, Edit, Grep, Glob, Bash
```

**èŒè´£**:
- è‡ªä¸»ä» TaskList claim ä»»åŠ¡
- ä¸¥æ ¼ TDD: å†™æµ‹è¯• -> å®ç° -> é€šè¿‡ -> æäº¤
- é€šè¿‡ SendMessage æŠ¥å‘Šè¿›åº¦å’Œé˜»å¡
- åªä¿®æ”¹è‡ªå·± task æŒ‡å®šçš„æ–‡ä»¶

**TDD æ‰§è¡Œå¾ªç¯**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Implementer TDD å¾ªç¯ (æ¯ä¸ª Task)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚ 1. Claim Task   â”‚  SendMessage â†’ Lead                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚           â”‚                                                 â”‚
â”‚           â–¼                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚ 2. Write Test   â”‚  RED: test fails                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚           â”‚                                                 â”‚
â”‚           â–¼                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚ 3. Implement    â”‚  GREEN: test passes                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚           â”‚                                                 â”‚
â”‚           â–¼                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚ 4. Refactor     â”‚  GREEN: test still passes              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚           â”‚                                                 â”‚
â”‚           â–¼                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚ 5. Verify       â”‚  Run full verify command               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚           â”‚                                                 â”‚
â”‚           â–¼                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚ 6. Report Done  â”‚  SendMessage â†’ Lead                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ–‡ä»¶æ‰€æœ‰æƒæ‰§è¡Œè§„åˆ™**:

| è§„åˆ™ | è¯´æ˜ | è¿ååæœ |
|------|------|---------|
| åªä¿®æ”¹ OWNS æ–‡ä»¶ | ä»»åŠ¡æŒ‡å®šçš„æ–‡ä»¶ | Lead æ‹’ç»æäº¤ |
| å¯è¯»å– READS æ–‡ä»¶ | ä¾èµ–æ–‡ä»¶ | æ— åæœï¼ˆåªè¯»ï¼‰ |
| ä¸å¾—ä¿®æ”¹æœªåˆ—å‡ºæ–‡ä»¶ | è®¡åˆ’å¤–æ–‡ä»¶ | Lead æ‹’ç»æäº¤ |

---

### 2. quality-sentinel Agent (x1)

**è§’è‰²å®šä¹‰**:

```yaml
name: quality-sentinel
model: sonnet
tools: Read, Grep, Glob, Bash  # åªè¯» â€” æ—  Write, Edit
```

**èŒè´£**:
- æŒç»­ç›‘æ§å·²å®Œæˆçš„ä»»åŠ¡
- éšæœºæŠ½æŸ¥ + å…¨é‡æ‰«æ
- å‘ç°é—®é¢˜ -> åˆ›å»ºä¿®å¤ taskï¼ˆé€šè¿‡ SendMessage é€šçŸ¥ Leadï¼‰

**5 ç±»æŠ½æŸ¥ç»´åº¦**:

| æŠ½æŸ¥ç»´åº¦ | æ£€æŸ¥å†…å®¹ | å…¸å‹é—®é¢˜ |
|---------|---------|---------|
| **æµ‹è¯•çœŸå®æ€§** | æµ‹è¯•æ˜¯å¦çœŸæ­£éªŒè¯äº†åŠŸèƒ½ | ç©ºæµ‹è¯•ã€always-pass æ–­è¨€ |
| **è§„èŒƒåˆè§„** | æ˜¯å¦ç¬¦åˆæ¶æ„ + ADR çº¦æŸ | ä½¿ç”¨äº†è¢« ADR å¦å†³çš„æ–¹æ¡ˆ |
| **è°ƒè¯•æ®‹ç•™** | æ˜¯å¦æœ‰è°ƒè¯•ä»£ç é—ç•™ | `console.log`, `debugger`, `TODO` |
| **é”™è¯¯å¤„ç†** | æ˜¯å¦æœ‰å®Œå–„çš„é”™è¯¯å¤„ç† | è£¸ `catch(e) {}`, åæ‰é”™è¯¯ |
| **ç±»å‹å®‰å…¨** | TypeScript ç±»å‹æ˜¯å¦ä¸¥æ ¼ | `any` æ»¥ç”¨, éç©ºæ–­è¨€ `!.` |

**æŠ½æŸ¥é¢‘ç‡**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Sentinel æŠ½æŸ¥ç­–ç•¥                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  æ¯å®Œæˆ 1 ä¸ª task â†’ sentinel æŠ½æŸ¥ï¼ˆæ¦‚ç‡ ~50%ï¼‰              â”‚
â”‚  æ¯å®Œæˆ 3 ä¸ª task â†’ sentinel å…¨é‡æ‰«æï¼ˆå¿…å®šï¼‰               â”‚
â”‚  æ‰€æœ‰ task å®Œæˆå â†’ sentinel æœ€ç»ˆå…¨é‡æ‰«æ                    â”‚
â”‚                                                             â”‚
â”‚  å‘ç°é—®é¢˜ä¸¥é‡åº¦:                                             â”‚
â”‚  CRITICAL â†’ ç«‹å³é€šçŸ¥ Leadï¼Œæš‚åœç›¸å…³ implementer             â”‚
â”‚  HIGH     â†’ åˆ›å»ºä¿®å¤ taskï¼Œä¼˜å…ˆåˆ†é…                         â”‚
â”‚  MEDIUM   â†’ åˆ›å»ºä¿®å¤ taskï¼Œæ­£å¸¸æ’é˜Ÿ                         â”‚
â”‚  LOW      â†’ è®°å½•ï¼Œä¸é˜»å¡                                   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3. parallel-implementation Skill

**6 æ­¥ç¼–æ’æµç¨‹**:

| æ­¥éª¤ | åç§° | è¯´æ˜ |
|------|------|------|
| Step 1 | **Plan Intake** | è¯»å– P3 äº§å‡ºçš„ä»»åŠ¡è®¡åˆ’ |
| Step 2 | **Task Analysis** | åˆ†æä¾èµ–å…³ç³» + æ–‡ä»¶æ‰€æœ‰æƒï¼Œç¡®å®šå¹¶è¡Œç­–ç•¥ |
| Step 3 | **Team Assembly** | æŒ‰ä»»åŠ¡æ•°é‡åˆ›å»º implementer + sentinel |
| Step 4 | **Parallel Execution** | åˆ†é…ä»»åŠ¡ã€ç›‘æ§è¿›åº¦ã€å¤„ç†é˜»å¡ |
| Step 5 | **Convergence** | ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ + sentinel æœ€ç»ˆæ‰«æ |
| Step 6 | **Cleanup** | éªŒè¯é›†æˆã€ç”Ÿæˆæ‰§è¡ŒæŠ¥å‘Š |

**Step 2 è¯¦è§£ â€” å¹¶è¡Œç­–ç•¥å†³å®š**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Task Analysis å¹¶è¡Œç­–ç•¥å†³å®š                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  è¾“å…¥: Task Plan (å« OWNS/READS/SHARED æ ‡æ³¨)                â”‚
â”‚                                                             â”‚
â”‚  Step 2a: æ„å»ºä¾èµ– DAG                                     â”‚
â”‚    T1 â”€â”€â†’ T3 â”€â”€â†’ T5                                        â”‚
â”‚    T2 â”€â”€â†’ T4                                                â”‚
â”‚                                                             â”‚
â”‚  Step 2b: æ£€æŸ¥æ–‡ä»¶æ‰€æœ‰æƒé‡å                                  â”‚
â”‚    T1 OWNS [a.ts, b.ts]                                     â”‚
â”‚    T2 OWNS [c.ts, d.ts]     â†’ æ— é‡å  â†’ å¯å¹¶è¡Œ              â”‚
â”‚    T3 OWNS [e.ts]           â†’ ä¾èµ– T1 â†’ T1 å®Œæˆåå¯åŠ¨      â”‚
â”‚    T4 OWNS [f.ts, a.ts]     â†’ a.ts ä¸ T1 é‡å ï¼            â”‚
â”‚                                                             â”‚
â”‚  Step 2c: ç”Ÿæˆæ‰§è¡Œè®¡åˆ’                                      â”‚
â”‚    Wave 1: T1 âˆ¥ T2 (å¹¶è¡Œ)                                   â”‚
â”‚    Wave 2: T3 âˆ¥ T4 (T4 ç­‰ T1 é‡Šæ”¾ a.ts)                    â”‚
â”‚    Wave 3: T5 (ä¾èµ– T3)                                     â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Team Size é…ç½®**:

| é…ç½® | Implementer æ•°é‡ | é€‚ç”¨åœºæ™¯ |
|------|-----------------|---------|
| `--team-size small` | 2 | <10 tasks, ç®€å•åŠŸèƒ½ |
| `--team-size medium` | 3-4 | 10-20 tasks, ä¸­ç­‰åŠŸèƒ½ |
| `--team-size large` | 5 | >20 tasks, å¤§å‹åŠŸèƒ½ |

---

## ğŸš€ ä½¿ç”¨æµç¨‹

### æ ‡å‡†ç”¨æ³•

```bash
# ä¸­ç­‰å›¢é˜Ÿ (3-5 implementers)
/forge-teams --phase 4 --team-size medium

# å°å›¢é˜Ÿ (2 implementers)
/forge-teams --phase 4 --team-size small

# å¤§å›¢é˜Ÿ (5 implementers)
/forge-teams --phase 4 --team-size large
```

### Lead æ‰§è¡Œåè®®

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Lead Delegate Mode åè®®                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Lead åœ¨ P4 æœŸé—´çš„å®Œæ•´èŒè´£:                                  â”‚
â”‚                                                             â”‚
â”‚  1. DISTRIBUTE                                              â”‚
â”‚     - è¯»å–è®¡åˆ’ï¼ŒæŒ‰ Wave åˆ†é…ä»»åŠ¡                             â”‚
â”‚     - é€šè¿‡ TaskCreate åˆ†é…ç»™ implementer                    â”‚
â”‚                                                             â”‚
â”‚  2. MONITOR                                                 â”‚
â”‚     - é€šè¿‡ TaskList æ£€æŸ¥è¿›åº¦                                â”‚
â”‚     - é€šè¿‡ SendMessage æ¥æ”¶çŠ¶æ€æ›´æ–°                         â”‚
â”‚                                                             â”‚
â”‚  3. RESOLVE                                                 â”‚
â”‚     - å¤„ç† implementer é—´çš„æ–‡ä»¶å†²çª                         â”‚
â”‚     - è§£å†³é˜»å¡ï¼ˆä¾èµ–æœªå®Œæˆã€æµ‹è¯•ç¯å¢ƒé—®é¢˜ï¼‰                   â”‚
â”‚     - åˆ†é… sentinel åˆ›å»ºçš„ä¿®å¤ task                         â”‚
â”‚                                                             â”‚
â”‚  4. CONVERGE                                                â”‚
â”‚     - ç¡®è®¤æ‰€æœ‰ä»»åŠ¡å®Œæˆ                                      â”‚
â”‚     - è§¦å‘ sentinel æœ€ç»ˆæ‰«æ                                â”‚
â”‚     - è¿è¡Œé›†æˆéªŒè¯                                          â”‚
â”‚                                                             â”‚
â”‚  Lead ç»ä¸åš:                                               â”‚
â”‚     âœ— å†™ä»£ç       âœ— ä¿®æ”¹æ–‡ä»¶                                â”‚
â”‚     âœ— è¿è¡Œæµ‹è¯•    âœ— Debug                                   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš™ï¸ vs pdforge å¯¹æ¯”

| ç»´åº¦ | pdforge (subagent-driven) | forge-teams (P4) | å¢é‡ä»·å€¼ |
|------|--------------------------|------------------|---------|
| æ‰§è¡Œæ¨¡å¼ | é¡ºåº subagent | å¹¶è¡Œ Agent Teams | N å€åŠ é€Ÿ |
| è´¨é‡æ§åˆ¶ | äº‹åå®¡æŸ¥ (P5) | å®æ—¶ quality sentinel | æ›´æ—©å‘ç°é—®é¢˜ |
| å†²çªé˜²æ­¢ | ä¸éœ€è¦ï¼ˆé¡ºåºæ‰§è¡Œï¼‰ | æ–‡ä»¶æ‰€æœ‰æƒæ˜ å°„ | å¹¶è¡Œå®‰å…¨ä¿éšœ |
| TDD | skill çº§åˆ«å¼ºåˆ¶ | agent çº§åˆ«å¼ºåˆ¶ | åŒç­‰çºªå¾‹ |
| å¹¶è¡Œåº¦ | 1 (é¡ºåº) | 2-5 (åŠ¨æ€) | å¯æ‰©å±• |
| Lead è§’è‰² | ç›´æ¥æ‰§è¡Œ | Delegate mode | ä¸æˆä¸ºç“¶é¢ˆ |
| Token å¼€é”€ | ä½ | ä¸­ï¼ˆç›¸ä¼¼æ€»é‡ï¼Œæ›´å¤š overheadï¼‰ | ~1.2x pdforge |

### ä½•æ—¶é€‰æ‹© pdforge é¡ºåºæ‰§è¡Œ

| æ¡ä»¶ | æ¨è | åŸå›  |
|------|------|------|
| <5 tasks | pdforge | å¹¶è¡Œ overhead ä¸å€¼å¾— |
| é«˜åº¦è€¦åˆçš„ä»»åŠ¡ | pdforge | æ— æ³•æœ‰æ•ˆå¹¶è¡Œ |
| æ‰€æœ‰ä»»åŠ¡å…±äº«æ–‡ä»¶ | pdforge | æ–‡ä»¶æ‰€æœ‰æƒæ— æ³•éš”ç¦» |
| æ—¶é—´ä¸æ•æ„Ÿ | pdforge | å¹¶è¡Œçš„ä¸»è¦ä¼˜åŠ¿æ˜¯æ—¶é—´ |

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### ç¡¬çº¦æŸ

1. **æ–‡ä»¶æ‰€æœ‰æƒæ˜¯ç¡¬çº¦æŸ**: è¿åæ–‡ä»¶æ‰€æœ‰æƒçš„ä¿®æ”¹ä¼šè¢« Lead æ‹’ç»ï¼Œimplementer å¿…é¡»å›é€€ä¿®æ”¹
2. **TDD ä¸å¯è·³è¿‡**: æ¯ä¸ª implementer å¿…é¡»éµå¾ªçº¢-ç»¿-é‡æ„å¾ªç¯ï¼Œsentinel ä¼šæŠ½æŸ¥æµ‹è¯•çœŸå®æ€§
3. **Sentinel ä¸ä¿®æ”¹ä»£ç **: å‘ç°é—®é¢˜åªåˆ›å»º fix taskï¼Œä¸è‡ªå·±ä¿®ï¼Œä¿æŒè§’è‰²åˆ†ç¦»
4. **Lead ä¸å†™ä»£ç **: Delegate mode æ„å‘³ç€åªåè°ƒä¸å®ç°ï¼Œè¿ååˆ™æˆä¸ºç“¶é¢ˆ

### åæ¨¡å¼æ¸…å•

| åæ¨¡å¼ | é—®é¢˜ | æ­£ç¡®åšæ³• |
|--------|------|---------|
| Lead å†™ä»£ç  | Lead æˆä¸ºç“¶é¢ˆï¼Œæ— æ³•åè°ƒ | Lead åªåè°ƒï¼Œå®ç°äº¤ç»™ implementer |
| Implementer ä¿®æ”¹é OWNS æ–‡ä»¶ | å¹¶è¡Œå†²çª | åªä¿®æ”¹ä»»åŠ¡æŒ‡å®šçš„ OWNS æ–‡ä»¶ |
| è·³è¿‡ TDD çº¢é˜¶æ®µ | æµ‹è¯•ä¸çœŸå® | å…ˆå†™å¤±è´¥çš„æµ‹è¯•ï¼Œå†å®ç° |
| Sentinel ä¿®æ”¹ä»£ç  | è§’è‰²æ··æ·† | Sentinel åªåˆ›å»º fix task |
| å›ºå®šå›¢é˜Ÿå¤§å° | èµ„æºæµªè´¹æˆ–ä¸è¶³ | æ ¹æ®ä»»åŠ¡æ•°é‡åŠ¨æ€è°ƒæ•´ |
| å¿½ç•¥ Sentinel å‘ç° | é—®é¢˜ç´¯ç§¯ | åŠæ—¶åˆ†é…ä¿®å¤ task |
| Wave é—´æ— éªŒè¯ | ä¸‹ä¸€æ³¢æ„å»ºåœ¨é”™è¯¯ä¸Š | æ¯ä¸ª Wave å®ŒæˆåéªŒè¯å†å¯åŠ¨ä¸‹ä¸€æ³¢ |

---

## ğŸ”— ä¸‹ä¸€é˜¶æ®µ

æ‰€æœ‰ä»»åŠ¡å®Œæˆåï¼Œè¿›å…¥ **é˜¶æ®µ 5ï¼šå¯¹æŠ—å®¡æŸ¥**ï¼š

```bash
# è‡ªåŠ¨è¿›å…¥å®¡æŸ¥
/forge-teams --phase 5

# å«çº¢é˜Ÿæ”»å‡»
/forge-teams --phase 5 --red-team

# çœ token æ¨¡å¼ï¼ˆæ— çº¢é˜Ÿï¼‰
/forge-teams --phase 5 --no-red-team
```

é˜¶æ®µ 5 å°†å¯¹æœ¬é˜¶æ®µäº§å‡ºçš„æ‰€æœ‰ä»£ç è¿›è¡Œå¹¶è¡Œå®¡æŸ¥ + çº¢é˜Ÿæ”»å‡»ã€‚
